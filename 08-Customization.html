<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Codeception.docs.ja : Codeception docs japanese translation">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/guides.css">

    <title>Codeception.docs.ja</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="container inner">
        <a id="forkme_banner" href="https://github.com/piccagliani/Codeception.docs.ja_JP">View on GitHub</a>

        <h1 id="project_title"><a href="index.html">Codeception.docs.ja</a></h1>
        <h2 id="project_tagline">Codeception docs japanese translation</h2>

        <section id="downloads">
            <a class="zip_download_link" href="https://github.com/piccagliani/Codeception.docs.ja_JP/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/piccagliani/Codeception.docs.ja_JP/tarball/master">Download this project as a tar.gz file</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="container">
    <div class="row">
        <section id="main_content" class="col-md-9">
            <h1>カスタマイズ</h1>

<p>この章では、どのようにしてファイル構造やテスト実行ルーチンをカスタマイズできるのか、説明します。</p>

<h2>複数アプリケーションのための1つのランナー</h2>

<p>プロジェクトが複数のアプリケーション（frontend, admin, api）で構成されていたり、バンドルとともにSymfony2を使っている場合、すべてのアプリケーション（バンドル）に対するすべてのテストを1ランナーで実行することに興味があるのではないでしょうか。
ここではプロジェクト全体をカバーする1つのレポートを取得してみます。</p>

<p><code>codeception.yml</code> ファイルをプロジェクトのルートフォルダに配置して、インクルードしたい他の <code>codeception.yml</code> へのパスを指定します。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">include</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">frontend</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">admin</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">api/rest</span>
<span class="l-Scalar-Plain">paths</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">log</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">log</span>
<span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">colors</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</code></pre></div>
<p>レポートやログの出力先となる <code>log</code> ディレクトリへのパスも指定してください。</p>

<h3>名前空間</h3>

<p>アクタークラスとヘルパークラスの名前空間が衝突するのを避けるため、それらは名前空間に属すべきです。
名前空間を持つテストスイートを作成するためには、ブートストラップコマンドに <code>--namespace</code> オプションを付与します。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>php codecept.phar bootstrap --namespace frontend
</code></pre></div>
<p>これにより、<code>namespace: frontend</code> パラメータを持つ <code>codeception.yml</code> ファイルとともに、新しいプロジェクトが作成されます。
ヘルパークラスの名前空間は <code>frontend\Codeception\Module</code> に、アクタークラスの名前空間は <code>frontend</code> になります。
こうして、新しく作成されたテストは次のようになります。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">use</span> <span class="nx">frontend\AcceptanceTester</span><span class="p">;</span>
<span class="nv">$I</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AcceptanceTester</span><span class="p">(</span><span class="nv">$scenario</span><span class="p">);</span>
<span class="c1">//...</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>それぞれのアプリケーション（バンドル）が自身の名前空間と異なるヘルパーやアクタークラスを持つようになって、すべてのテストを1ランナーで実行できるようになります。先ほど作成したメタ設定を使って、通常どおりCodeceptionを実行します。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>php codecept.phar run
</code></pre></div>
<p>これにより、3つのすべてのアプリケーションのテストスイートが起動し、すべてのテストレポートがマージされます。これはつまり、継続的インテグレーションサーバー上でテストを実行し、1つのJUnitとHTML形式のレポートを取得したい場合に大変役に立ちます。コードカバレッジレポートについても同じくマージされます。</p>

<p>もし各アプリケーションが共通のヘルパーを利用している場合、次のセクションに従ってください。</p>

<h2>ヘルパークラスのオートロード</h2>

<p>グローバルな <code>_bootstrap.php</code> ファイルがあります。このファイルはテスト実行の冒頭でインクルードされます。このファイルをオートローダーや定数の初期化に利用することをおすすめします。特に、<code>tests/_helpers</code> ディレクトリに格納されていないモジュールやヘルパークラスをインクルードしたい場合に役に立ちます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../lib/tests/helpers/MyHelper.php&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>代替として、Composerのオートローダーを使用することができます。Codeceptionも独自のオートローダーを持っています。
これは（まだ）PSR-0の互換性はありませんが、ヘルパークラスへの代替パスを宣言する場合に非常に便利です。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Codeception\Util\Autoload</span><span class="o">::</span><span class="na">registerSuffix</span><span class="p">(</span><span class="s1">&#39;Helper&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../lib/tests/helpers&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>これで、<code>__DIR__.&#39;/../lib/tests/helpers&#39;</code> から検索された、名前が<code>Helper</code>で終わるすべてのクラスが追加されます。特定の名前空間に属すヘルパーをロードするよう宣言することもできます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Codeception\Util\Autoload</span><span class="o">::</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;MyApp\\Test&#39;</span><span class="p">,</span> <span class="s1">&#39;Helper&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../lib/tests/helpers&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>これは <code>__DIR__.&#39;/../lib/tests/helpers&#39;</code> 内の <code>MyApp\Test\MyHelper</code> のようなクラスを探すようオートローダーに示します。</p>

<p>あるいは、クラス名に適切な接尾辞がつけられている場合に <strong>ページオブジェクトとコントローラー</strong> クラスへのパスを指定するためにオートローダーを使用することができます。</p>

<p><code>tests/_bootstrap.php</code> ファイルの例:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Codeception\Util\Autoload</span><span class="o">::</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;MyApp\\Test&#39;</span><span class="p">,</span> <span class="s1">&#39;Helper&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../lib/tests/helpers&#39;</span><span class="p">);</span>
<span class="nx">Codeception\Util\Autoload</span><span class="o">::</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;MyApp\\Test&#39;</span><span class="p">,</span> <span class="s1">&#39;Page&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/pageobjects&#39;</span><span class="p">);</span>
<span class="nx">Codeception\Util\Autoload</span><span class="o">::</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;MyApp\\Test&#39;</span><span class="p">,</span> <span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/controller&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<h2>拡張クラス</h2>

<div class="alert">このセクションは高度なPHPのスキルと、CodeceptionとPHPUnitの内部に関する一部の知識を必要とします。</div>

<p>Codeceptionはコアな機能を拡張する限定的な機能を持っています。
拡張機能は現在の機能をオーバーライドすることを想定していませんが、もしあなたが経験のある開発者でテストのフローをフックしたい場合にはとても便利です。</p>

<p>基本的には、拡張機能は <a href="http://symfony.com/doc/current/components/event_dispatcher/introduction.html">Symfony Event Dispatcher</a> コンポーネントを基盤とするイベントリスナー以上の何ものでもありません。</p>

<p>これらがイベントとイベントクラスです。テスト実行中に発生する順番で一覧化しています。それぞれのイベントには対応したクラスがあり、特定のオブジェクトを含んでイベントリスターに渡されます。</p>

<h3>イベント</h3>

<table><thead>
<tr>
<th style="text-align: center">イベント</th>
<th>いつ？</th>
<th style="text-align: right">何を含む？</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><code>suite.before</code></td>
<td>Before suite is executed</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/SuiteEvent.php">Suite, Settings</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.start</code></td>
<td>Before test is executed</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/TestEvent.php">Test</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.before</code></td>
<td>At the very beginning of test execution</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/TestEvent.php">Codeception Test</a></td>
</tr>
<tr>
<td style="text-align: center"><code>step.before</code></td>
<td>Before step</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/StepEvent.php">Step</a></td>
</tr>
<tr>
<td style="text-align: center"><code>step.after</code></td>
<td>After step</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/StepEvent.php">Step</a></td>
</tr>
<tr>
<td style="text-align: center"><code>step.fail</code></td>
<td>After failed step</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/StepEvent.php">Step</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.fail</code></td>
<td>After failed test</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/FailEvent.php">Test, Fail</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.error</code></td>
<td>After test ended with error</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/FailEvent.php">Test, Fail</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.incomplete</code></td>
<td>After executing incomplete test</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/FailEvent.php">Test, Fail</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.skipped</code></td>
<td>After executing skipped test</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/FailEvent.php">Test, Fail</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.success</code></td>
<td>After executing successful test</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/TestEvent.php">Test</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.after</code></td>
<td>At the end of test execution</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/TestEvent.php">Codeception Test</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.end</code></td>
<td>After test execution</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/TestEvent.php">Test</a></td>
</tr>
<tr>
<td style="text-align: center"><code>suite.after</code></td>
<td>After suite was executed</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/SuiteEvent.php">Suite, Result, Settings</a></td>
</tr>
<tr>
<td style="text-align: center"><code>test.fail.print</code></td>
<td>When test fails are printed</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/FailEvent.php">Test, Fail</a></td>
</tr>
<tr>
<td style="text-align: center"><code>result.print.after</code></td>
<td>After result was printed</td>
<td style="text-align: right"><a href="https://github.com/Codeception/Codeception/blob/master/src/Codeception/Event/PrintResultEvent.php">Result, Printer</a></td>
</tr>
</tbody></table>

<p><code>test.start</code>と<code>test.before</code>、 <code>test.after</code>と<code>test.end</code>とに混乱するかもしれません。Start/endイベントはPHPUnit自身によって発生されますが、before/afterイベントはCodeceptionによって発生されます。ですので、従来の（<code>PHPUnit_Framework_TestCase</code>を継承した）PHPUnitのテストではbefore/afterイベントは発生しません。<code>test.before</code>イベントでは、<code>test.start</code>では不可能な、スキップされたか不完全なテストを追跡することができます。<a href="https://github.com/Codeception/Codeception/tree/master/src/Codeception/Subscriber">Codeception internal event listeners</a>にてより多くのことを学ぶことができます。</p>

<p>拡張クラスは <code>Codeception\Platform\Extension</code> クラスを継承します。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">MyCustomExtension</span> <span class="k">extends</span> <span class="nx">\Codeception\Platform\Extension</span>
<span class="p">{</span>
    <span class="c1">// list events to listen to</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$events</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;suite.after&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;afterSuite&#39;</span><span class="p">,</span>
        <span class="s1">&#39;test.before&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;beforeTest&#39;</span><span class="p">,</span>
        <span class="s1">&#39;step.before&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;beforeStep&#39;</span><span class="p">,</span>
        <span class="s1">&#39;test.fail&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;testFailed&#39;</span><span class="p">,</span>
        <span class="s1">&#39;result.print.after&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;print&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="c1">// methods that handle events</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">afterSuite</span><span class="p">(</span><span class="nx">\Codeception\Event\SuiteEvent</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">beforeTest</span><span class="p">(</span><span class="nx">\Codeception\Event\TestEvent</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">beforeStep</span><span class="p">(</span><span class="nx">\Codeception\Event\StepEvent</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testFailed</span><span class="p">(</span><span class="nx">\Codeception\Event\FailEvent</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">print</span><span class="p">(</span><span class="nx">\Codeception\Event\PrintResultEvent</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>イベントハンドラーメソッドを実行することにより、渡されたオブジェクトを更新してもイベントをリッスンすることができます。
拡張クラスはいくつかの基本的なメソッドを持っています。</p>

<ul>
<li><code>write</code> - コンソールに出力する</li>
<li><code>writeln</code> - 改行コードとおともにコンソールに出力する</li>
<li><code>getModule</code> - モジュールにアクセスする</li>
<li><code>_reconfigure</code> - コンストラクターをオーバーライドする替わりに実装する</li>
</ul>

<h3>拡張機能の有効化</h3>

<p>単純な拡張クラスを実装したら、<code>tests/_bootstrap.php</code>ファイルにインクルードしてください。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span> <span class="s1">&#39;/path/to/my/MyCustomExtension.php&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>codeception.yml</code> で拡張機能を有効にします。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">MyCustomExtension</span><span class="p-Indicator">]</span>
</code></pre></div>
<h3>拡張機能の設定</h3>

<p>拡張クラスでは <code>options</code> プロパティを介して現状渡されたオプションにアクセスすることができます。
また、<code>\Codeception\Configuration::config()</code> を利用してグローバル設定にアクセスすることもできます。
もし拡張クラスにカスタムなオプションを持たせたい場合、<code>codeception.yml</code> ファイルからそれを渡すことができます。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">MyCustomExtension</span><span class="p-Indicator">]</span>
    <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">MyCustomExtension</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">param</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">value</span>
</code></pre></div>
<p>渡された設定には次のように <code>config</code> プロパティを介してアクセスすることができます。 <code>$this-&gt;config[&#39;param&#39;]</code></p>

<p>とても基本的な拡張機能である <a href="https://github.com/Codeception/Notifier">Notifier</a> を確認してください。</p>

<h2>グループクラス</h2>

<p>グループクラスは特定のグループに属すテストのイベントをリッスンするための拡張機能です。
テストが次のグループに追加されたとき、</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> 
<span class="nv">$scenario</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>
<span class="nv">$I</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AcceptanceTester</span><span class="p">(</span><span class="nv">$scenario</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>このテストは次のイベントを発生させます。</p>

<ul>
<li><code>test.before.admin</code></li>
<li><code>step.before.admin</code></li>
<li><code>step.after.admin</code></li>
<li><code>test.success.admin</code></li>
<li><code>test.fail.admin</code></li>
<li><code>test.after.admin</code></li>
</ul>

<p>グループクラスはこれらのイベントをリッスンするために構築されています。これは、テストに追加の設定が必要になった場合にとても便利です。<code>admin</code> グループに属すテストのためにフィクスチャをロードしたいとしましょう。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">AdminGroup</span> <span class="k">extends</span> <span class="nx">\Codeception\Platform\Group</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$group</span> <span class="o">=</span> <span class="s1">&#39;admin&#39;</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">_before</span><span class="p">(</span><span class="nx">\Codeception\Event\TestEvent</span> <span class="nv">$e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">writeln</span><span class="p">(</span><span class="s1">&#39;inserting additional admin users...&#39;</span><span class="p">);</span>

        <span class="nv">$db</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getModule</span><span class="p">(</span><span class="s1">&#39;Db&#39;</span><span class="p">);</span>
        <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">haveInDatabase</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bill&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin&#39;</span><span class="p">));</span>
        <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">haveInDatabase</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin&#39;</span><span class="p">));</span>
        <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">haveInDatabase</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mark&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;banned&#39;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">_after</span><span class="p">(</span><span class="nx">\Codeception\Event\TestEvent</span> <span class="nv">$e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">writeln</span><span class="p">(</span><span class="s1">&#39;cleaning up admin users...&#39;</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>グループクラスは <code>php codecept.phar generate:group groupname</code> コマンドによって作成することができます。
グループクラスは <code>tests/_groups</code> ディレクトリに格納されます。</p>

<p>拡張クラスと同様、<code>codeception.yml</code> にてグループクラスを有効にすることができます。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">AdminGroup</span><span class="p-Indicator">]</span>    
</code></pre></div>
<p>これで Adminグループクラスは <code>admin</code>グループに属すテストのすべてのイベントをリッスンするようになります。</p>

<h2>まとめ</h2>

<p>これまでに述べてきた各機能は、いくつかについては高度なPHPの知識を必要とするかもしれませんが、規模の大きいプロジェクトのテストをCodeceptionで自動化する際に、劇的に役立つことがあります。グループや拡張機能やそのほかCodeceptionの強力な機能には「ベストプラクティス」や「ユースケース」は存在しません。これらの拡張機能を使うことで解決できそうな問題に直面した場合、試してみてください。</p>

        </section>
        <nav id="nav" class="col-md-3">
            <div class="well">
                <ol>
                    <li><a href="01-Introduction.html">イントロダクション</a></li>
                    <li><a href="02-GettingStarted.html">はじめに</a></li>
                    <li><a href="03-ModulesAndHelpers.html">モジュールとヘルパー</a></li>
                    <li><a href="04-AcceptanceTests.html">受け入れテスト</a></li>
                    <li><a href="05-FunctionalTests.html">機能テスト</a></li>
                    <li><a href="06-UnitTests.html">単体テスト</a></li>
                    <li><a href="07-AdvancedUsage.html">高度な使用法</a></li>
                    <li><a href="08-Customization.html">カスタマイズ</a></li>
                    <li><a href="09-Data.html">データを取り扱う</a></li>
                    <li><a href="10-WebServices.html">Webサービスをテストする</a></li>
                    <li><a href="11-Codecoverage.html">コードカバレッジ</a></li>
                    <li><a href="12-ParallelExecution.html">並列実行</a></li>
                </ol>
            </div>
        </nav>
    </div>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="container inner">
        <p class="copyright">Codeception.docs.ja maintained by <a target="_blank" href="https://github.com/piccagliani">piccagliani</a></p>
        <p>Last updated: 2015-03-05 18:10:00 +0900, Based on <a target="_blank" href="https://github.com/Codeception/Codeception/releases/tag/2.0.11">Codeception 2.0.11</a></p>
        <div id="contributors"></div>
    </footer>
</div>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-59804278-1");
        pageTracker._trackPageview();
    } catch(err) {}
</script>
<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="javascripts/contributors.js"></script>
</body>
</html>
